# Loader - Приложение для загрузки книг в базу данных

## Описание
Приложение **Loader** предназначено для автоматического заполнения базы данных Paradise книгами из локальных файлов.

## Функциональность
- Чтение всех файлов .fb2 из папки `DB/ServerBooks/Books/`
- Автоматическое сопоставление книг с метаданными из файла `Текстовый документ.txt`
- Поиск соответствующих обложек в папке `DB/ServerBooks/Images/`
- Загрузка всей информации в базу данных MySQL

## Требования
1. MySQL Server с базой данных Paradise
2. Подключение: localhost, database=Paradise, user=root, password=root
3. Файлы книг в формате .fb2 в папке `DB/ServerBooks/Books/`
4. Обложки в формате .jpg в папке `DB/ServerBooks/Images/`
5. Файл с метаданными `DB/ServerBooks/Текстовый документ.txt`

## Структура данных

### Формат имен файлов
- Книги: `1.fb2`, `2.fb2`, ..., `100.fb2`
- Обложки: `1.jpg`, `2.jpg`, ..., `100.jpg`
- Номера должны совпадать для правильного сопоставления

### Формат метаданных
Файл `Текстовый документ.txt` должен содержать строки вида:
```
1.  Александр Пушкин - "Евгений Онегин"
2.  Александр Пушкин - "Капитанская дочка"
...
```

## Использование

### Запуск приложения
1. Запустите `Loader.exe`
2. Нажмите кнопку "Загрузить книги в БД"
3. Дождитесь завершения обработки всех файлов

### Логирование
Приложение выводит подробный лог операций:
- Проверка подключения к БД
- Количество найденных файлов
- Обработка каждой книги
- Ошибки (если есть)

### Результат
После успешного выполнения:
- Все книги будут добавлены в таблицу `books`
- Информация о файлах будет добавлена в таблицу `book_files`
- Связи между книгами и их файлами будут установлены

## Обработка
Приложение обрабатывает каждую книгу следующим образом:
1. Извлекает номер из имени файла (например, `1.fb2` → ID=1)
2. Ищет метаданные (автор и название) в `Текстовый документ.txt`
3. Создает запись в таблице `books`
4. Вычисляет хеш файла для проверки целостности
5. Ищет соответствующую обложку в папке `Images`
6. Создает запись в таблице `book_files`

## Поддержка книг
- Сейчас в библиотеке 37 книг (1-37)
- Подготовлена структура для 100 книг
- Добавление новых книг: просто положите файлы и обновите метаданные

## Возможные проблемы
- **Ошибка подключения к БД**: Проверьте настройки MySQL и убедитесь, что сервер запущен
- **Папки не найдены**: Проверьте пути к папкам Books и Images
- **Метаданные не найдены**: Убедитесь, что файл `Текстовый документ.txt` существует
- **Книги не загружены**: Проверьте формат имен файлов (должны быть 1.fb2, 2.fb2 и т.д.)

## База данных
Приложение работает с следующими таблицами:
- `books` - основная информация о книгах
- `book_files` - информация о файлах книг

Схема таблиц определена в `DB/DQL.txt`
