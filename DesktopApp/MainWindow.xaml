<Window x:Class="LIB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LIB"
        mc:Ignorable="d"
        Title="Paradise"
        Height="600" Width="1196"
        MinHeight="500" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource WindowBackgroundBrush}" Loaded="Window_Loaded">

    <Window.Resources>
        <!-- Светлая тема -->
        <SolidColorBrush x:Key="WindowBackgroundBrush" Color="#F2F2F2"/>
        <SolidColorBrush x:Key="TextBrush" Color="Black"/>
        <SolidColorBrush x:Key="ButtonBackgroundBrush" Color="#FFDAB9"/>
        <SolidColorBrush x:Key="ButtonBorderBrush" Color="#333333"/>

        <!-- Тёмная тема -->
        <SolidColorBrush x:Key="WindowBackgroundBrushDark" Color="#1E1E1E"/>
        <SolidColorBrush x:Key="TextBrushDark" Color="White"/>
        <SolidColorBrush x:Key="ButtonBackgroundBrushDark" Color="#404040"/>
        <SolidColorBrush x:Key="ButtonBorderBrushDark" Color="#606060"/>

        <!-- Стиль для кнопок с скруглёнными углами -->
        <Style x:Key="RoundedButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3"
                                >

                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Opacity" Value="0.8"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="Black" 
                                                        BlurRadius="3" 
                                                        ShadowDepth="1" 
                                                        Opacity="0.2"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Opacity" Value="0.9"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="Black" 
                                                        BlurRadius="2" 
                                                        ShadowDepth="2" 
                                                        Opacity="0.3"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопок действий в списке -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" 
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#E0E0E0"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#999999"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#D0D0D0"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#888888"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <!-- Стиль для переключателя режимов -->
        <Style x:Key="ToggleButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border"
                                Background="Transparent"
                                BorderBrush="Transparent"
                                BorderThickness="0"
                                CornerRadius="20">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#E0E0E0"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#D0D0D0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для активной кнопки переключателя -->
        <Style x:Key="ActiveToggleButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border"
                                Background="{DynamicResource ButtonBackgroundBrush}"
                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                BorderThickness="1"
                                CornerRadius="20">
                            <Border.Effect>
                                <DropShadowEffect Color="Black" 
                                                BlurRadius="5" 
                                                ShadowDepth="2" 
                                                Opacity="0.2"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#F0F0F0"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#E0E0E0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <!-- Стиль для кнопки выхода -->
        <Style x:Key="ExitButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" 
                                Background="Transparent"
                                BorderBrush="Transparent"
                                BorderThickness="1"
                                CornerRadius="5"
                                Padding="15,8">
                            <Border.Effect>
                                <DropShadowEffect Color="#FF0000" 
                                                BlurRadius="8" 
                                                ShadowDepth="2" 
                                                Opacity="0.3"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FF3333"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#FF6666"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#CC0000"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#FF4444"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="{DynamicResource WindowBackgroundBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Боковая панель -->
        <Border x:Name="LeftPanel" Grid.Column="0" 
                Background="{DynamicResource ButtonBackgroundBrush}" 
                BorderBrush="{DynamicResource ButtonBorderBrush}" 
                BorderThickness="0,0,1,0">
            <Grid Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Заголовок боковой панели -->
                <TextBlock Grid.Row="0"
                           Text="📚 Paradise" 
                           FontSize="20" 
                           FontWeight="Bold" 
                           Margin="0,0,0,20"
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource TextBrush}"
                           Cursor="Hand"
                           MouseLeftButtonDown="LibraryTitle_MouseLeftButtonDown">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="black" 
                                        BlurRadius="2" 
                                        ShadowDepth="1" 
                                        Opacity="0.3"/>
                    </TextBlock.Effect>
                </TextBlock>

                <!-- Навигационные кнопки -->
                <StackPanel x:Name="NavigationButtons" Grid.Row="1" Visibility="Collapsed">
                    <Button x:Name="BooksButton"
                            Content="📖 Книги"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="BooksButton_Click"/>

                    <Button x:Name="CatalogBooksButton"
                            Content="📚 Каталог книг"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="CatalogBooksButton_Click"/>

                    <Button x:Name="AdminPanelButton"
                            Content="⚙️ Админ-панель"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminPanelButton_Click"
                            Visibility="Collapsed"/>



                    <!--<Button x:Name="AuthorsButton"
                            Content="✍️ Авторы"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"/>
                    
                    <Button x:Name="CategoriesButton"
                            Content="🏷️ Категории"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"/>
                    
                    <Button x:Name="ReadersButton"
                            Content="👥 Читатели"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"/>
                    
                    <Button x:Name="ReportsButton"
                            Content="📊 Отчёты"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"/>-->
                </StackPanel>

                <!-- Дополнительные опции внизу -->
                <StackPanel x:Name="SettingsButtons" Grid.Row="2">
                    <!-- Разделитель -->
                    <Separator Margin="0,20" Background="{DynamicResource ButtonBorderBrush}"/>


                    <Button x:Name="SettingsButton" 
                            Visibility="Collapsed"
                            Content="⚙️ Настройки"
                            Height="40"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Click="SettingsButton_Click"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"/>

                    <Button x:Name="HelpButton"
                            Content="❓ Помощь"
                            Height="40"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource RoundedButtonStyle}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Основной контент -->
        <Grid x:Name="RightPanel" Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Верхняя панель с кнопками -->
            <Border Grid.Row="0" 
                        Background="{DynamicResource ButtonBackgroundBrush}" 
                        BorderBrush="{DynamicResource ButtonBorderBrush}" 
                        BorderThickness="0,0,0,1"
                        Padding="10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Заголовок и навигация -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button x:Name="BackToLibraryButton"
                                    Content="← Вернуться к библиотеке"
                                    Height="35"
                                    Width="180"
                                    Padding="15,8"
                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                    Click="BackToLibrary_Click"
                                    Style="{StaticResource RoundedButtonStyle}"
                                    Visibility="Collapsed"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="ExitButton"
                                    Content="Выход"
                                    Width="90"
                                    Height="35"
                                    Foreground="{DynamicResource TextBrush}"
                                    FontWeight="SemiBold"
                                    FontSize="13"
                                    Click="ExitButton_Click"
                                    Style="{StaticResource ExitButtonStyle}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Основной контент -->
            <Grid Grid.Row="1" Margin="10">
                <!-- Панель загрузки приложения -->
                <Grid x:Name="LoadingPanel" Visibility="Visible">
                    <Border Background="{DynamicResource ButtonBackgroundBrush}" CornerRadius="16" Padding="60" Margin="80">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="Загрузка приложения..."
                                           Margin="0,0,0,25"
                                           FontSize="24"
                                           FontWeight="SemiBold"
                                           Foreground="{DynamicResource TextBrush}"
                                           HorizontalAlignment="Center"/>
                            <ProgressBar IsIndeterminate="True" Width="250" Height="20"/>
                        </StackPanel>
                    </Border>
                </Grid>
                <!-- Авторизация/регистрация -->
                <Grid x:Name="AutorisationPanel" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Центральная панель авторизации -->
                    <Border Grid.Column="0" 
                                Background="{DynamicResource ButtonBackgroundBrush}" 
                                BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                BorderThickness="2"
                                CornerRadius="15"
                                Padding="40"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                                BlurRadius="20" 
                                                ShadowDepth="5" 
                                                Opacity="0.3"/>
                        </Border.Effect>

                        <Grid Width="600" Height="700">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*" MinHeight="300"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Заголовок -->
                            <StackPanel Grid.Row="0" Margin="0,0,0,10">
                                <TextBlock Text="🔐 Добро пожаловать!"
                                               FontSize="32"
                                               FontWeight="Bold"
                                               HorizontalAlignment="Center"
                                               Foreground="{DynamicResource TextBrush}"
                                               Margin="0,0,0,10">
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="Black" 
                                                            BlurRadius="3" 
                                                            ShadowDepth="1" 
                                                            Opacity="0.2"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                                <TextBlock Text="Войдите в систему или создайте новый аккаунт"
                                               FontSize="16"
                                               HorizontalAlignment="Center"
                                               Foreground="{DynamicResource TextBrush}"
                                               Opacity="0.8"/>
                            </StackPanel>

                            <!-- Кнопки выбора -->
                            <Grid Grid.Row="1" VerticalAlignment="Top">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>

                                <!-- Переключатель режимов -->
                                <Border Grid.Row="0" 
                                            Background="{DynamicResource ButtonBorderBrush}" 
                                            CornerRadius="25" 
                                            Padding="5"
                                            Margin="0,0,0,10"
                                            
                                            HorizontalAlignment="Center">
                                    <StackPanel Orientation="Horizontal">
                                        <Button x:Name="AutorisationButton"
                                                    Content="Вход"
                                                    Height="45"
                                                    Width="120"
                                                    Background="Transparent"
                                                    BorderBrush="Transparent"
                                                    Foreground="{DynamicResource TextBrush}"
                                                    FontSize="16"
                                                    FontWeight="SemiBold"
                                                    Click="AutorisationButton_Click"
                                                    Style="{StaticResource ActiveToggleButtonStyle}"
                                                    VerticalAlignment="Bottom"/>
                                        <Button x:Name="RegistrationButton"
                                    Content="Регистрация"
                                                    Height="45"
                                                    Width="120"
                                                    Background="Transparent"
                                                    BorderBrush="Transparent"
                                                    Foreground="{DynamicResource TextBrush}"
                                                    FontSize="16"
                                                    FontWeight="SemiBold"
                                                    Click="RegistrationButton_Click"
                                                    Style="{StaticResource ToggleButtonStyle}"/>
                                    </StackPanel>
                                </Border>

                                <!-- Форма входа -->
                                <StackPanel x:Name="LoginForm" Grid.Row="1" Margin="0,0,0,0">
                                    <TextBlock Text="Вход в аккаунт"
                                                   FontSize="20"
                                                   FontWeight="SemiBold"
                                                   HorizontalAlignment="Center"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,25"/>

                                    <StackPanel>
                                        <TextBlock Text="Логин:"
                                                       FontSize="14"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,8"/>
                                        <TextBox x:Name="LoginTextBox"
                                                     Height="40"
                                                     Padding="5,6"
                                                     FontSize="16"
                                                     Background="White"
                                                     BorderBrush="#CCCCCC"
                                                     BorderThickness="2"
                                                     Foreground="Black"
                                                     Margin="0,0,0,15" KeyDown="PasswordTextBox_KeyDown"/>

                                        <TextBlock Text="Пароль:"
                                                       FontSize="14"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,8"/>
                                        <PasswordBox x:Name="PasswordTextBox"
                                                         Height="40"
                                                         Padding="5,6"
                                                         FontSize="16"
                                                         Background="White"
                                                         BorderBrush="#CCCCCC"
                                                         BorderThickness="2"
                                                         Foreground="Black"
                                                         Margin="0,0,0,25" KeyDown="PasswordTextBox_KeyDown"/>

                                        <Button x:Name="LoginSubmitButton"
                                                    Content="Войти"
                                                    Height="45"
                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                                    FontSize="16"
                                                    FontWeight="SemiBold"
                                                    Click="LoginSubmit_Click"
                                                    VerticalAlignment="Bottom"
                                    Style="{StaticResource RoundedButtonStyle}"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Форма регистрации -->
                                <StackPanel x:Name="RegisterForm" Grid.Row="1" Margin="0,0,0,0" Visibility="Collapsed">
                                    <TextBlock Text="Создание аккаунта"
                                                   FontSize="20"
                                                   FontWeight="SemiBold"
                                                   HorizontalAlignment="Center"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,25"/>

                                    <StackPanel>
                                        <TextBlock Text="Логин:"
                                                       FontSize="14"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,8"/>
                                        <TextBox x:Name="RegisterLoginTextBox"
                                                     Height="40"
                                                     Padding="5,6"
                                                     FontSize="16"
                                                     Background="White"
                                                     BorderBrush="#CCCCCC"
                                                     BorderThickness="2"
                                                     Foreground="Black"
                                                     Margin="0,0,0,15" KeyDown="RegisterLoginTextBox_KeyDown"/>

                                        <TextBlock Text="Пароль:"
                                                       FontSize="14"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,8"/>
                                        <PasswordBox x:Name="RegisterPasswordTextBox"
                                                         Height="40"
                                                         Padding="5,6"
                                                         FontSize="16"
                                                         Background="White"
                                                         BorderBrush="#CCCCCC"
                                                         BorderThickness="2"
                                                         Foreground="Black"
                                                         Margin="0,0,0,15" KeyDown="RegisterLoginTextBox_KeyDown"/>

                                        <TextBlock Text="Подтвердите пароль:"
                                                       FontSize="14"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,8"/>
                                        <PasswordBox x:Name="ConfirmPasswordTextBox"
                                                         Height="40"
                                                         Padding="5,6"
                                                         FontSize="16"
                                                         Background="White"
                                                         BorderBrush="#CCCCCC"
                                                         BorderThickness="2"
                                                         Foreground="Black"
                                                         Margin="0,0,0,25" KeyDown="RegisterLoginTextBox_KeyDown"/>

                                        <Button x:Name="RegisterSubmitButton"
                                                    Content="Зарегистрироваться"
                                                    Height="45"
                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                                    FontSize="16"
                                                    FontWeight="SemiBold"
                                                    Click="RegisterSubmit_Click"
                                    Style="{StaticResource RoundedButtonStyle}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>

                            <!-- Дополнительная информация -->
                            <StackPanel Grid.Row="2" HorizontalAlignment="Center" Margin="-50">

                                <TextBlock Text="Или войдите как гость"
                                               FontSize="14"
                                               Foreground="{DynamicResource TextBrush}"
                                               Opacity="0.7"
                                               Margin="18,0,0,10"/>
                                <Button x:Name="GuestLoginButton"
                                            Content="Продолжить как гость"
                                            Height="35"
                                            Width="180"
                                            Background="Transparent"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            Foreground="{DynamicResource TextBrush}"
                                            FontSize="14"
                                            Click="GuestLogin_Click"
                                            Style="{StaticResource RoundedButtonStyle}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
                <!-- Приветственная секция (по умолчанию) -->
                <Grid x:Name="WelcomePanel" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Приветственная секция -->
                    <Border Grid.Row="0" 
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="25"
                                    Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Добро пожаловать в Paradise!"
                                               FontSize="28"
                                               FontWeight="Bold"
                                               HorizontalAlignment="Center"
                                               Foreground="{DynamicResource TextBrush}"
                                               Margin="0,0,0,10"/>

                        </StackPanel>
                    </Border>

                    <!-- Основная область контента -->
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Левая колонка - Список книг -->
                        <Border Grid.Column="0" 
                                        Background="{DynamicResource ButtonBackgroundBrush}" 
                                        BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="20"
                                        Margin="0,0,10,0">
                            <StackPanel>
                                <TextBlock Text="📚 Список книг"
                                                   FontSize="18"
                                                   FontWeight="SemiBold"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,15"/>

                                <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="300" HorizontalScrollBarVisibility="Disabled">

                                    <ListBox x:Name="BooksListBox"
                                                     Background="Transparent"
                                                     BorderThickness="0"
                                                     Foreground="{DynamicResource TextBrush}"
                                                     MouseDoubleClick="BooksListBox_MouseDoubleClick">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Margin="5">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="400"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <!-- Основная информация о книге -->
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="{Binding Title}" 
                                                                           FontWeight="Bold" 
                                                                           FontSize="14"
                                                                           Width="620"/>
                                                        <TextBlock Text="{Binding Author}" 
                                                                           FontSize="12" 
                                                                           Opacity="0.8"/>
                                                        <TextBlock Text="{Binding FileName}" 
                                                                           FontSize="10" 
                                                                           Opacity="0.6"
                                                                           Width="620"/>
                                                    </StackPanel>

                                                    <!-- Кнопки действий (появляются при наведении) -->
                                                    <StackPanel Grid.Column="1" 
                                                                        Orientation="Horizontal" 
                                                                        Margin="15,0,0,0"
                                                                        Opacity="0"
                                                                        x:Name="ActionButtons">
                                                        <Button Content="📚" 
                                                                        Width="25" 
                                                                        Height="25" 
                                                                        Margin="3"
                                                                        Background="{DynamicResource ButtonBackgroundBrush}"
                                                                        BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                                        Foreground="{DynamicResource TextBrush}"
                                                                        Click="ReadBookInline_Click"
                                                                        Tag="{Binding}"
                                                                        Style="{StaticResource ActionButtonStyle}"
                                                                        ToolTip="Читать книгу"/>
                                                        <Button Content="✏️" 
                                                                        Width="25" 
                                                                        Height="25" 
                                                                        Margin="3"
                                                                        Background="{DynamicResource ButtonBackgroundBrush}"
                                                                        BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                                        Foreground="{DynamicResource TextBrush}"
                                                                        Click="EditBookTitle_Click"
                                                                        Tag="{Binding}"
                                                                        Style="{StaticResource ActionButtonStyle}"
                                                                        ToolTip="Редактировать"/>
                                                        <Button Content="🗑️" 
                                                                        Width="25" 
                                                                        Height="25" 
                                                                        Margin="3"
                                                                        Background="{DynamicResource ButtonBackgroundBrush}"
                                                                        BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                                        Foreground="{DynamicResource TextBrush}"
                                                                        Click="DeleteBookInline_Click"
                                                                        Tag="{Binding}"
                                                                        Style="{StaticResource ActionButtonStyle}"
                                                                        ToolTip="Удалить"/>
                                                    </StackPanel>
                                                </Grid>

                                                <!-- Триггеры для показа/скрытия кнопок -->
                                                <DataTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Trigger.EnterActions>
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation Storyboard.TargetName="ActionButtons"
                                                                                            Storyboard.TargetProperty="Opacity"
                                                                                            To="1" Duration="0:0:0.2"/>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </Trigger.EnterActions>
                                                        <Trigger.ExitActions>
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation Storyboard.TargetName="ActionButtons"
                                                                                            Storyboard.TargetProperty="Opacity"
                                                                                            To="0" Duration="0:0:0.2"/>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </Trigger.ExitActions>
                                                    </Trigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                        <ListBox.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Header="📚 Читать книгу" Click="ReadBook_Click"/>
                                                <MenuItem Header="📖 Открыть файл" Click="OpenBookFile_Click"/>
                                                <MenuItem Header="🗑️ Удалить книгу" Click="DeleteBook_Click"/>
                                                <Separator/>
                                                <MenuItem Header="ℹ️ Информация" Click="ShowBookInfo_Click"/>
                                            </ContextMenu>
                                        </ListBox.ContextMenu>
                                    </ListBox>
                                </ScrollViewer>

                                <TextBlock x:Name="NoBooksText"
                                                   Text="Книги ещё не добавлены"
                                                   FontSize="14"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Opacity="0.6"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Margin="0,20"/>
                            </StackPanel>
                        </Border>

                        <!-- Правая колонка - Статистика -->
                        <Border Grid.Column="1" 
                                        Background="{DynamicResource ButtonBackgroundBrush}" 
                                        BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="20"
                                        Margin="10,0,0,0">
                            <StackPanel>
                                <TextBlock Text="📊 Статистика библиотеки"
                                                   FontSize="18"
                                                   FontWeight="SemiBold"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,15"/>

                                <StackPanel x:Name="StatisticsPanel">
                                    <TextBlock x:Name="TotalBooksText"
                                                       Text="Всего книг: 0"
                                                       FontSize="14"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,5"/>
                                    <TextBlock x:Name="LastAddedText"
                                                       Text="Последняя добавлена: -"
                                                       FontSize="14"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,5"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Нижняя панель - Быстрые действия -->
                    <Border Grid.Row="2" 
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20"
                                    Margin="0,20,0,0">
                        <StackPanel>
                            <TextBlock Text="⚡ Быстрые действия"
                                               FontSize="18"
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextBrush}"
                                               Margin="0,0,0,15"/>

                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button x:Name="AddBookButton"
                                                Content="➕ Добавить книгу"
                                                Width="140"
                                                Height="35"
                                                Margin="5"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Click="AddBookButton_Click"
                                                Style="{StaticResource RoundedButtonStyle}"/>

                                <Button x:Name="ReadSelectedBookButton"
                                                Content="📚 Читать книгу"
                                                Width="140"
                                                Height="35"
                                                Margin="5"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Click="ReadSelectedBook_Click"
                                                Style="{StaticResource RoundedButtonStyle}"/>

                                <Button x:Name="ClearBooksButton"
                                                Content="🗑️ Очистить список"
                                                Width="140"
                                                Height="35"
                                                Margin="5"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Click="ClearBooksButton_Click"
                                                Style="{StaticResource RoundedButtonStyle}"/>

                                <Button Content="📋 Отчёт"
                                                Width="120"
                                                Height="35"
                                                Margin="5"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Style="{StaticResource RoundedButtonStyle}"/>



                                <Button x:Name="ResetAllProgressButton"
                                                Content="🔄 Сбросить прогресс"
                                                Width="150"
                                                Height="35"
                                                Margin="5"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Click="ResetAllProgress_Click"
                                                Style="{StaticResource RoundedButtonStyle}"
                                                ToolTip="Сбросить прогресс чтения для всех книг"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Панель отображения книг в гриде (скрыта по умолчанию) -->
                <Grid x:Name="BooksGridPanel" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Заголовок панели книг -->
                    <Border Grid.Row="0" 
                                Background="{DynamicResource ButtonBackgroundBrush}" 
                                BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="25"
                                Margin="0,0,0,20">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="📚 Библиотека книг"
                                                FontSize="28"
                                                FontWeight="Bold"
                                                Foreground="{DynamicResource TextBrush}"
                                                Margin="0,0,0,5" Cursor=""/>
                                <TextBlock Text="Просматривайте и управляйте вашей коллекцией книг"
                                                FontSize="16"
                                                Foreground="{DynamicResource TextBrush}"
                                                Opacity="0.8"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" 
                                            Orientation="Horizontal" 
                                            VerticalAlignment="Center">
                                <Button x:Name="BackToWelcomeButton"
                                            Content="← Назад"
                                            Height="40"
                                            Width="120"
                                            Padding="20,10"
                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            Foreground="{DynamicResource TextBrush}"
                                            Click="BackToWelcome_Click"
                                            Style="{StaticResource RoundedButtonStyle}"
                                            FontSize="14"
                                            FontWeight="SemiBold"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Грид с книгами -->
                    <ScrollViewer Grid.Row="1" 
                                        VerticalScrollBarVisibility="Auto"
                                        HorizontalScrollBarVisibility="Disabled">
                        <ItemsControl x:Name="BooksItemsControl">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Width="180" 
                                                Height="350" 
                                                Margin="10"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                BorderThickness="1"
                                                CornerRadius="8"
                                                Padding="15">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="190"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>

                                            <!-- Обложка книги -->
                                            <Border Grid.Row="0"
                                                        Background="{DynamicResource ButtonBorderBrush}"
                                                        CornerRadius="4"
                                                        Margin="0,0,0,10">
                                                <Image x:Name="BookCoverImage"
                                                            Source="{Binding CoverImageSource}"
/>
                                            </Border>

                                            <!-- Информация о книге -->
                                            <StackPanel Grid.Row="1" Margin="0,0,0,10">
                                                <TextBlock Text="{Binding Title}" 
                                                                FontWeight="Bold" 
                                                                FontSize="14"
                                                                Foreground="{DynamicResource TextBrush}"
                                                                TextWrapping="Wrap"
                                                                TextAlignment="Center"
                                                                MaxHeight="40"
                                                                Margin="0,0,0,5"
                                                                MouseLeftButtonDown="ReadBookText_Click"/>
                                                <TextBlock Text="{Binding Author}" 
                                                                FontSize="12" 
                                                                Foreground="{DynamicResource TextBrush}"
                                                                Opacity="0.8"
                                                                TextAlignment="Center"
                                                                TextWrapping="Wrap"
                                                                MaxHeight="20"/>

                                                <!-- Прогресс чтения -->
                                                <Border Margin="0,5,0,0"
                                                            Background="{DynamicResource ButtonBorderBrush}"
                                                            Height="4"
                                                            CornerRadius="2">
                                                    <Border Background="{DynamicResource AccentBrush}"
                                                                CornerRadius="2"
                                                                Width="{Binding ProgressWidth}"/>
                                                </Border>
                                                <TextBlock Text="{Binding ProgressText}"
                                                                FontSize="10"
                                                                Foreground="{DynamicResource TextBrush}"
                                                                Opacity="0.7"
                                                                TextAlignment="Center"
                                                                Margin="0,2,0,0"/>
                                            </StackPanel>

                                            <!-- Кнопки действий -->
                                            <StackPanel Grid.Row="2" 
                                                            Orientation="Horizontal" 
                                                            HorizontalAlignment="Center">
                                                <Button Content="📚" 
                                                            Width="30" 
                                                            Height="30" 
                                                            Margin="3"
                                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                            Foreground="{DynamicResource TextBrush}"
                                                            Click="ReadBookFromGrid_Click"
                                                            Tag="{Binding}"
                                                            Style="{StaticResource RoundedButtonStyle}"
                                                            ToolTip="Читать книгу"/>

                                                <Button Content="✏️" 
                                                            Width="30" 
                                                            Height="30" 
                                                            Margin="3"
                                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                            Foreground="{DynamicResource TextBrush}"
                                                            Click="EditBookFromGrid_Click"
                                                            Tag="{Binding}"
                                                            Style="{StaticResource RoundedButtonStyle}"
                                                            ToolTip="Редактировать"/>

                                                <Button Content="🗑️" 
                                                            Width="30" 
                                                            Height="30" 
                                                            Margin="3"
                                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                            Foreground="{DynamicResource TextBrush}"
                                                            Click="DeleteBookFromGrid_Click"
                                                            Tag="{Binding}"
                                                            Style="{StaticResource RoundedButtonStyle}"
                                                            ToolTip="Удалить"/>

                                                <Button Content="🔄" 
                                                            Width="30" 
                                                            Height="30" 
                                                            Margin="3"
                                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                            Foreground="{DynamicResource TextBrush}"
                                                            Click="ResetProgressFromGrid_Click"
                                                            Tag="{Binding}"
                                                            Style="{StaticResource RoundedButtonStyle}"
                                                            ToolTip="Сбросить прогресс чтения"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>

                <!-- Панель чтения книги -->
                <Grid x:Name="ReadingPanel" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Заголовок книги -->
                    <Border Grid.Row="0" 
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="25"
                                    Margin="0,0,0,20">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock x:Name="ReadingBookTitle"
                                                   Text="Название книги"
                                                   FontSize="24"
                                                   FontWeight="Bold"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,5"/>
                                <TextBlock x:Name="ReadingBookAuthor"
                                                   Text="Автор"
                                                   FontSize="16"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Opacity="0.8"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" 
                                                Orientation="Horizontal" 
                                                VerticalAlignment="Center">
                                <Button x:Name="ShowXmlButton"
                                                Content="XML"
                                                Width="40" Height="35"
                                                Margin="5,0"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Style="{StaticResource RoundedButtonStyle}"
                                                Click="ShowXml_Click"
                                                ToolTip="Показать исходный XML для отладки"/>

                                <Button x:Name="FontSizeUpButton"
                                                Content="A+"
                                                Width="40" Height="35"
                                                Margin="5,0"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Style="{StaticResource RoundedButtonStyle}"
                                                Click="FontSizeUp_Click"
                                                ToolTip="Увеличить шрифт"/>

                                <Button x:Name="FontSizeDownButton"
                                                Content="A-"
                                                Width="40" Height="35"
                                                Margin="5,0"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Style="{StaticResource RoundedButtonStyle}"
                                                Click="FontSizeDown_Click"
                                                ToolTip="Уменьшить шрифт"/>

                                <!-- Кнопки навигации -->
                                <Separator Margin="10,0" Background="{DynamicResource ButtonBorderBrush}"/>

                                <Button x:Name="PreviousPageButton"
                                                Content="←"
                                                Width="40" Height="35"
                                                Margin="5,0"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Style="{StaticResource RoundedButtonStyle}"
                                                Click="PreviousPage_Click"
                                                ToolTip="Предыдущая страница (←, ↑ или Page Up)"/>

                                <Button x:Name="NextPageButton"
                                                Content="→"
                                                Width="40" Height="35"
                                                Margin="5,0"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Style="{StaticResource RoundedButtonStyle}"
                                                Click="NextPage_Click"
                                                ToolTip="Следующая страница (→, ↓, Page Down или Пробел)"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Область текста -->
                    <Border Grid.Row="1" 
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20,10,20,0">
                        <ScrollViewer x:Name="BookScrollViewer"
                                              VerticalScrollBarVisibility="Auto"
                                              HorizontalScrollBarVisibility="Disabled"
                                              Padding="10"
                                              
                                              ScrollChanged="ScrollViewer_ScrollChanged">
                            <StackPanel x:Name="BookContentPanel"
                                                
                                                />
                        </ScrollViewer>
                    </Border>

                    <!-- Нижняя панель с прогрессом -->
                    <Border Grid.Row="2" 
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20"
                                    Margin="0,20,0,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Прогресс чтения -->
                            <StackPanel Grid.Column="0">
                                <TextBlock x:Name="PageText"
                                                   Text="Страница 1 из 1"
                                                   FontSize="14"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,8"/>
                                <TextBlock x:Name="ProgressText"
                                                   Text="Прогресс чтения: 0%"
                                                   FontSize="14"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,8"/>
                                <ProgressBar x:Name="ReadingProgressBar"
                                                     Height="10"
                                                     Minimum="0" Maximum="100" Value="0"
                                                     Background="{DynamicResource ButtonBorderBrush}"
                                                     Foreground="{DynamicResource TextBrush}"/>
                            </StackPanel>

                            <!-- Статус -->
                            <TextBlock Grid.Column="1"
                                               x:Name="StatusText"
                                               Text="Готово к чтению"
                                               FontSize="14"
                                               Foreground="{DynamicResource TextBrush}"
                                               Opacity="0.7"
                                               VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                </Grid>

                <!-- Панель настроек -->
                <Grid x:Name="SettingsPanel" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Заголовок настроек -->
                    <Border Grid.Row="0" 
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="25"
                                    Margin="0,0,0,20">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="⚙️ Настройки приложения"
                                                   FontSize="28"
                                                   FontWeight="Bold"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Margin="0,0,0,5"/>
                                <TextBlock Text="Персонализируйте ваш опыт работы с Paradise"
                                                   FontSize="16"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   Opacity="0.8"/>
                            </StackPanel>

                            <Button x:Name="BackFromSettingsButton"
                                            Grid.Column="1"
                                            Content="← Назад"
                                            Height="40"
                                            Width="120"
                                            Padding="20,10"
                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            Foreground="{DynamicResource TextBrush}"
                                            Click="BackFromSettings_Click"
                                            Style="{StaticResource RoundedButtonStyle}"
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <!-- Основная область настроек -->
                    <ScrollViewer Grid.Row="1" 
                                          VerticalScrollBarVisibility="Auto"
                                          HorizontalScrollBarVisibility="Disabled">
                        <StackPanel Margin="0,0,0,20">

                            <!-- Раздел "Внешний вид" -->
                            <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15">
                                <StackPanel>
                                    <TextBlock Text="🎨 Внешний вид"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <!-- Тёмная тема -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="🌙 Тёмная тема"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Переключение между светлой и тёмной темой"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="DarkThemeToggle"
                                                          Grid.Column="2"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"
                                                          Checked="DarkThemeToggle_Checked"
                                                          Unchecked="DarkThemeToggle_Unchecked"/>
                                    </Grid>

                                    <!-- Прозрачность окна -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="🔍 Прозрачность окна"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Настройка прозрачности основного окна"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <StackPanel Grid.Column="2" 
                                                            Orientation="Horizontal" 
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center">
                                            <Slider x:Name="OpacitySlider"
                                                            Minimum="0.7"
                                                            Maximum="1.0"
                                                            Value="1.0"
                                                            Width="200"
                                                            Height="25"
                                                            ValueChanged="OpacitySlider_ValueChanged"/>
                                            <TextBlock x:Name="OpacityValueText"
                                                               Text="100%"
                                                               FontSize="14"
                                                               FontWeight="SemiBold"
                                                               Foreground="{DynamicResource TextBrush}"
                                                               VerticalAlignment="Center"
                                                               Width="50"
                                                               Margin="15,0,0,0"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Раздел "Чтение" -->
                            <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15">
                                <StackPanel>
                                    <TextBlock Text="📖 Настройки чтения"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <!-- Размер шрифта -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="📝 Размер шрифта"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Настройка размера текста для комфортного чтения"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <StackPanel Grid.Column="2" 
                                                            Orientation="Horizontal" 
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center">
                                            <Slider x:Name="FontSizeSlider"
                                                            Minimum="10"
                                                            Maximum="32"
                                                            Value="18"
                                                            Width="250"
                                                            Height="25"
                                                            ValueChanged="FontSizeSlider_ValueChanged"/>
                                            <TextBlock x:Name="FontSizeValueText"
                                                               Text="18px"
                                                               FontSize="14"
                                                               FontWeight="SemiBold"
                                                               Foreground="{DynamicResource TextBrush}"
                                                               VerticalAlignment="Center"
                                                               Width="60"
                                                               Margin="15,0,0,0"/>
                                        </StackPanel>
                                    </Grid>

                                    <!-- Межстрочный интервал -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="📏 Межстрочный интервал"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Настройка расстояния между строками"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <StackPanel Grid.Column="2" 
                                                            Orientation="Horizontal" 
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center">
                                            <Slider x:Name="LineHeightSlider"
                                                            Minimum="1.0"
                                                            Maximum="2.5"
                                                            Value="1.5"
                                                            Width="250"
                                                            Height="25"
                                                            ValueChanged="LineHeightSlider_ValueChanged"/>
                                            <TextBlock x:Name="LineHeightValueText"
                                                               Text="1.5x"
                                                               FontSize="14"
                                                               FontWeight="SemiBold"
                                                               Foreground="{DynamicResource TextBrush}"
                                                               VerticalAlignment="Center"
                                                               Width="50"
                                                               Margin="15,0,0,0"/>
                                        </StackPanel>
                                    </Grid>

                                    <!-- Автосохранение прогресса -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="💾 Автосохранение прогресса"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Автоматическое сохранение прогресса чтения"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="AutoSaveToggle"
                                                          Grid.Column="2"
                                                          IsChecked="True"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>

                                    <!-- Автопрокрутка -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="🔄 Автопрокрутка при чтении"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Автоматическая прокрутка текста во время чтения"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="AutoScrollToggle"
                                                          Grid.Column="2"
                                                          IsChecked="False"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Раздел "Интерфейс" -->
                            <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15">
                                <StackPanel>
                                    <TextBlock Text="🖥️ Интерфейс"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <!-- Показывать прогресс чтения -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="📊 Показывать прогресс чтения"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Отображение индикатора прогресса чтения"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="ShowProgressToggle"
                                                          Grid.Column="2"
                                                          IsChecked="True"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>

                                    <!-- Компактный режим -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="📱 Компактный режим"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Уменьшенный интерфейс для экономии места"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="CompactModeToggle"
                                                          Grid.Column="2"
                                                          IsChecked="False"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>

                                    <!-- Анимации -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="✨ Анимации интерфейса"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Плавные переходы и анимации элементов"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="AnimationsToggle"
                                                          Grid.Column="2"
                                                          IsChecked="True"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Раздел "Файлы" -->
                            <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15">
                                <StackPanel>
                                    <TextBlock Text="📁 Файлы"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <!-- Автоматическое добавление -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="📥 Автоматически добавлять новые файлы"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Автоматическое добавление новых файлов в библиотеку"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="AutoAddToggle"
                                                          Grid.Column="2"
                                                          IsChecked="False"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>

                                    <!-- Показывать скрытые файлы -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="👁️ Показывать скрытые файлы"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Отображение скрытых файлов в списке"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="ShowHiddenToggle"
                                                          Grid.Column="2"
                                                          IsChecked="False"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Раздел "Уведомления" -->
                            <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15">
                                <StackPanel>
                                    <TextBlock Text="🔔 Уведомления"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <!-- Звуковые уведомления -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="🔊 Звуковые уведомления"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Воспроизведение звуков при уведомлениях"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="SoundNotificationsToggle"
                                                          Grid.Column="2"
                                                          IsChecked="True"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>

                                    <!-- Уведомления о прогрессе -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="📈 Уведомления о прогрессе"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Уведомления о достижении целей чтения"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="ProgressNotificationsToggle"
                                                          Grid.Column="2"
                                                          IsChecked="True"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Раздел "Администратор" (только для админов) -->
                            <Border x:Name="AdminSettingsBorder"
                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15"
                                            Visibility="Collapsed">
                                <StackPanel>
                                    <TextBlock Text="⚙️ Администратор"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <!-- Путь к папке DB -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="📁 Путь к папке DB"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Путь к папке с серверными книгами"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <StackPanel Grid.Column="2" 
                                                            Orientation="Horizontal" 
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center">
                                            <TextBox x:Name="DbFolderPathTextBox"
                                                             Width="300"
                                                             Height="35"
                                                             FontSize="13"
                                                             Padding="10,5"
                                                             VerticalContentAlignment="Center"
                                                             Background="White"
                                                             BorderBrush="#CCCCCC"
                                                             BorderThickness="2"
                                                             Foreground="Black"
                                                             Margin="0,0,10,0"
                                                             LostFocus="DbFolderPathTextBox_LostFocus"/>

                                            <Button x:Name="BrowseDbFolderButton"
                                                            Content="📂 Обзор"
                                                            Width="100"
                                                            Height="35"
                                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                            Foreground="{DynamicResource TextBrush}"
                                                            Style="{StaticResource RoundedButtonStyle}"
                                                            Click="BrowseDbFolderButton_Click"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Раздел "Аккаунт" -->
                            <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15">
                                <StackPanel>
                                    <TextBlock Text="👤 Аккаунт"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <!-- Текущий пользователь -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="Текущий пользователь"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Идентификатор активного аккаунта"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <TextBlock x:Name="UserInfoText"
                                                           Grid.Column="2"
                                                           Text="Гость"
                                                           FontSize="14"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           HorizontalAlignment="Right"
                                                           VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- Синхронизация прогресса -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="Синхронизация прогресса"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Автоматически сохранять прогресс в аккаунте"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <CheckBox x:Name="SyncProgressToggle"
                                                          Grid.Column="2"
                                                          IsChecked="True"
                                                          HorizontalAlignment="Right"
                                                          VerticalAlignment="Center"
                                                          Width="20"
                                                          Height="20"/>
                                    </Grid>

                                    <!-- Выход из аккаунта -->
                                    <Grid Margin="0,8,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250"/>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0"
                                                           Text="Выход из аккаунта"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"/>

                                        <TextBlock Grid.Column="1"
                                                           Text="Завершить сеанс и вернуться к авторизации"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Opacity="0.7"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           Margin="10,0,0,0"/>

                                        <Button x:Name="SettingsLogoutButton"
                                                        Grid.Column="2"
                                                        Content="🚪 Выйти"
                                                        Width="120"
                                                        Height="35"
                                                        HorizontalAlignment="Right"
                                                        Background="{DynamicResource ButtonBackgroundBrush}"
                                                        BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                        Foreground="{DynamicResource TextBrush}"
                                                        Style="{StaticResource RoundedButtonStyle}"
                                                        Click="SettingsLogoutButton_Click"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Раздел "О программе" -->
                            <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="6"
                                            Margin="0,0,0,15"
                                            Padding="15">
                                <StackPanel>
                                    <TextBlock Text="ℹ️ О программе"
                                                       FontSize="18"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,10"/>

                                    <TextBlock Text="📚 Paradise Library Manager&#x0a;Версия 1.0.0&#x0a;&#x0a;Система управления личной библиотекой с поддержкой различных форматов книг и отслеживанием прогресса чтения.&#x0a;&#x0a;Поддерживаемые форматы:&#x0a;• TXT, MD, RTF&#x0a;• FB2, XML&#x0a;• PDF, EPUB&#x0a;• DOC, DOCX"
                                                       FontSize="13"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       TextWrapping="Wrap"
                                                       Margin="0,10,0,10"
                                                       LineHeight="20"/>

                                    <Button x:Name="CheckUpdatesButton"
                                                    Content="🔄 Проверить обновления"
                                                    Width="180"
                                                    Height="35"
                                                    HorizontalAlignment="Left"
                                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                    Foreground="{DynamicResource TextBrush}"
                                                    Style="{StaticResource RoundedButtonStyle}"
                                                    Click="CheckUpdatesButton_Click"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Нижняя панель с кнопками -->
                    <Border Grid.Row="2" 
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20"
                                    Margin="0,20,0,0">
                        <StackPanel Orientation="Horizontal" 
                                            HorizontalAlignment="Right">
                            <Button x:Name="ResetSettingsButton"
                                            Content="🔄 Сбросить"
                                            Width="130"
                                            Height="45"
                                            Margin="0,0,15,0"
                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            Foreground="{DynamicResource TextBrush}"
                                            Style="{StaticResource RoundedButtonStyle}"
                                            Click="ResetSettingsButton_Click"/>

                            <Button x:Name="ExportSettingsButton"
                                            Content="📤 Экспорт"
                                            Width="130"
                                            Height="45"
                                            Margin="0,0,15,0"
                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            Foreground="{DynamicResource TextBrush}"
                                            Style="{StaticResource RoundedButtonStyle}"
                                            Click="ExportSettingsButton_Click"/>

                            <Button x:Name="CloseSettingsButton"
                                            Content="✅ Закрыть"
                                            Width="130"
                                            Height="45"
                                            Background="{DynamicResource ButtonBackgroundBrush}"
                                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                                            Foreground="{DynamicResource TextBrush}"
                                            Style="{StaticResource RoundedButtonStyle}"
                                            Click="CloseSettingsButton_Click"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Панель каталога книг -->
                <Grid x:Name="CatalogPanel" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Заголовок каталога -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,20">
                        <Border Background="{DynamicResource ButtonBackgroundBrush}" 
                                        BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="25"
                                        Margin="0,0,0,15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="📚 Каталог книг"
                                                       FontSize="28"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Margin="0,0,0,5"/>
                                    <TextBlock Text="Доступные книги для добавления в вашу библиотеку"
                                                       FontSize="16"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Opacity="0.8"/>
                                </StackPanel>

                                <Button x:Name="BackFromCatalogButton"
                                                Grid.Column="1"
                                                Content="← Назад"
                                                Height="40"
                                                Width="120"
                                                Padding="20,10"
                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                Foreground="{DynamicResource TextBrush}"
                                                Click="BackFromCatalog_Click"
                                                Style="{StaticResource RoundedButtonStyle}"
                                                FontSize="14"
                                                FontWeight="SemiBold"
                                                VerticalAlignment="Center"/>
                            </Grid>
                        </Border>

                        <!-- Поле поиска -->
                        <Border Background="{DynamicResource ButtonBackgroundBrush}" 
                                        BorderBrush="{DynamicResource ButtonBorderBrush}" 
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                                   Text="🔍 Поиск:"
                                                   FontSize="14"
                                                   FontWeight="SemiBold"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,10,0"/>

                                <TextBox x:Name="CatalogSearchTextBox"
                                                 Grid.Column="1"
                                                 Height="35"
                                                 FontSize="14"
                                                 Padding="10,5"
                                                 VerticalContentAlignment="Center"
                                                 Background="White"
                                                 BorderBrush="#CCCCCC"
                                                 BorderThickness="2"
                                                 Foreground="Black"
                                                 TextChanged="CatalogSearchTextBox_TextChanged"/>
                            </Grid>
                        </Border>
                    </StackPanel>

                    <!-- Область с книгами -->
                    <Grid Grid.Row="1">
                        <ScrollViewer VerticalScrollBarVisibility="Auto"
                                              HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl x:Name="CatalogBooksItemsControl">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Width="180" 
                                                        Height="350" 
                                                        Margin="10"
                                                        Background="{DynamicResource ButtonBackgroundBrush}"
                                                        BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                        BorderThickness="1"
                                                        CornerRadius="8"
                                                        Padding="15"
                                                        Cursor="Hand">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="190"/>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <!-- Обложка книги -->
                                                <Border Grid.Row="0"
                                                                Background="{DynamicResource ButtonBorderBrush}"
                                                                CornerRadius="4"
                                                                Margin="0,0,0,10">
                                                    <Image Source="{Binding CoverImageSource}"
                                                                   Stretch="Uniform"/>
                                                </Border>

                                                <!-- Информация о книге -->
                                                <StackPanel Grid.Row="1" Margin="0,0,0,10">
                                                    <TextBlock Text="{Binding Title}" 
                                                                        FontWeight="Bold" 
                                                                        FontSize="14"
                                                                        Foreground="{DynamicResource TextBrush}"
                                                                        TextWrapping="Wrap"
                                                                        TextAlignment="Center"
                                                                        MaxHeight="40"
                                                                        Margin="0,0,0,5"/>
                                                    <TextBlock Text="{Binding Author}" 
                                                                        FontSize="12" 
                                                                        Foreground="{DynamicResource TextBrush}"
                                                                        Opacity="0.8"
                                                                        TextAlignment="Center"
                                                                        TextWrapping="Wrap"
                                                                        MaxHeight="20"/>
                                                </StackPanel>

                                                <!-- Кнопка добавления -->
                                                <Button Grid.Row="2"
                                                                Content="➕ Добавить в библиотеку"
                                                                Width="150"
                                                                Height="35"
                                                                FontSize="11"
                                                                HorizontalAlignment="Center"
                                                                Background="{DynamicResource ButtonBackgroundBrush}"
                                                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                                                Foreground="{DynamicResource TextBrush}"
                                                                Style="{StaticResource RoundedButtonStyle}"
                                                                Click="AddBookFromCatalog_Click"
                                                                Tag="{Binding}"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>

                        <!-- Сообщение, если книг нет -->
                        <TextBlock x:Name="NoCatalogBooksText"
                                           Text="Нет доступных книг в каталоге"
                                           FontSize="16"
                                           Foreground="{DynamicResource TextBrush}"
                                           Opacity="0.6"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Visibility="Collapsed"/>
                    </Grid>
                </Grid>
                <Grid x:Name="AdminPanel" Visibility="Collapsed" Margin="0,0,-20,5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Заголовок административной панели -->
                    <Border Grid.Row="0" 
            Background="{DynamicResource ButtonBackgroundBrush}" 
            BorderBrush="{DynamicResource ButtonBorderBrush}" 
            BorderThickness="1"
            CornerRadius="8"
            Padding="25"
            Margin="0,0,23,11">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="⚙️ Панель администратора"
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="{DynamicResource TextBrush}"
                           Margin="0,0,0,5"/>
                                <TextBlock Text="Управление библиотекой и пользователями"
                           FontSize="16"
                           Foreground="{DynamicResource TextBrush}"
                           Opacity="0.8"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" 
                        Orientation="Horizontal" 
                        VerticalAlignment="Center">
                                <Button x:Name="BackFromAdminButton"
                        Content="← Назад"
                        Height="40"
                        Width="120"
                        Padding="20,10"
                        Background="{DynamicResource ButtonBackgroundBrush}"
                        BorderBrush="{DynamicResource ButtonBorderBrush}"
                        Foreground="{DynamicResource TextBrush}"
                        Click="BackFromAdmin_Click"
                        Style="{StaticResource RoundedButtonStyle}"
                        FontSize="14"
                        FontWeight="SemiBold"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Основное содержимое административной панели -->
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="250"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Боковая панель навигации -->
                        <Border Grid.Column="0"
                Background="{DynamicResource ButtonBackgroundBrush}" 
BorderBrush="{DynamicResource ButtonBorderBrush}" 
BorderThickness="1"
CornerRadius="8"
Padding="5"
Margin="0,0,10,0">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15">
                                    <!-- Главная панель -->
                                    <Button x:Name="AdminMainButton"
                            Content="🏠 Главная панель"
                            Height="45"
                            Margin="0,5"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="14"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminMainButton_Click"/>

                                    <!-- Управление контентом -->
                                    <TextBlock Text="Управление контентом"
                               FontSize="11"
                               FontWeight="Bold"
                               Foreground="{DynamicResource TextBrush}"
                               Opacity="0.7"
                               Margin="0,15,0,5"
                               />

                                    <Button x:Name="AdminBooksButton"
                            Content="📚 Книги"
                            Height="40"
                            Margin="0,2"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminBooksButton_Click"/>

                                    <Button x:Name="AdminBookFilesButton"
                            Content="📄 Файлы книг"
                            Height="40"
                            Margin="0,2"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminBookFilesButton_Click"/>

                                    <Button x:Name="AdminUsersButton"
                            Content="👥 Пользователи"
                            Height="40"
                            Margin="0,2"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminUsersButton_Click"/>

                                    <!-- Статистика и отчеты -->
                                    <TextBlock Text="Статистика и отчеты"
                               FontSize="11"
                               FontWeight="Bold"
                               Foreground="{DynamicResource TextBrush}"
                               Opacity="0.7"
                               Margin="0,15,0,5"
                               />

                                    <Button x:Name="AdminReadingStatsButton"
                            Content="📊 Статистика чтения"
                            Height="40"
                            Margin="0,2"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminReadingStatsButton_Click"/>

                                    <Button x:Name="AdminUserBooksButton"
                            Content="📖 Книги пользователей"
                            Height="40"
                            Margin="0,2"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminUserBooksButton_Click"/>

                                    <Button x:Name="AdminProgressButton"
                            Content="📈 Прогресс чтения"
                            Height="40"
                            Margin="0,2"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminProgressButton_Click"/>

                                    <!-- Система -->
                                    <TextBlock Text="Система"
                               FontSize="11"
                               FontWeight="Bold"
                               Foreground="{DynamicResource TextBrush}"
                               Opacity="0.7"
                               Margin="0,15,0,5"
                               />

                                    
                                    <Button x:Name="AdminBackupButton"
                            Content="💾 Резервное копирование"
                            Height="40"
                            Margin="0,2"
                            Background="{DynamicResource ButtonBackgroundBrush}"
                            BorderBrush="{DynamicResource ButtonBorderBrush}"
                            Foreground="{DynamicResource TextBrush}"
                            FontSize="13"
                            Style="{StaticResource RoundedButtonStyle}"
                            Click="AdminBackupButton_Click"/>
                                </StackPanel>
                            </ScrollViewer>
                        </Border>

                        <!-- Область содержимого -->
                        <Border Grid.Column="1"
                Background="{DynamicResource ButtonBackgroundBrush}"
                BorderBrush="{DynamicResource ButtonBorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                                Margin="0,0,23,0">
                            <Grid>
                                <!-- Панель загрузки -->
                                <Border x:Name="AdminLoadingPanel"
                        Background="{DynamicResource ButtonBackgroundBrush}"
                        CornerRadius="8"
                        Visibility="Visible">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock x:Name="TextBoxLoading" Text="Загрузка..."
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextBrush}"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,10"/>
                                        <ProgressBar IsIndeterminate="True" Width="200" Height="10"/>
                                    </StackPanel>
                                </Border>

                                <!-- Главная панель администратора -->
                                <ScrollViewer x:Name="AdminMainContent"
                              VerticalScrollBarVisibility="Auto"
                              Visibility="Collapsed">
                                    <StackPanel Margin="25"
                                                
                                                >
                                        <!-- Приветственная информация -->
                                        <Border Background="{DynamicResource ButtonBackgroundBrush}"
                                BorderBrush="{DynamicResource ButtonBorderBrush}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="20"
                                Margin="0,0,0,20">
                                            <StackPanel>
                                                <TextBlock Text="Добро пожаловать в панель управления Paradise Library!"
                                           FontSize="18"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource TextBrush}"
                                           Margin="0,0,0,10"/>
                                                <TextBlock Text="Используйте меню слева для навигации по разделам административной панели."
                                           FontSize="14"
                                           Foreground="{DynamicResource TextBrush}"
                                           Opacity="0.8"
                                           TextWrapping="Wrap"/>
                                            </StackPanel>
                                        </Border>

                                        <!-- Быстрая статистика -->
                                        <TextBlock Text="📊 Быстрая статистика"
                                   FontSize="16"
                                   FontWeight="Bold"
                                   Foreground="{DynamicResource TextBrush}"
                                   Margin="0,0,0,15"/>

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Всего книг -->
                                            <Border Grid.Column="0"
                                    Background="#007ACC"
                                    CornerRadius="6"
                                    Margin="5"
                                    Padding="15">
                                                <StackPanel>
                                                    <TextBlock x:Name="AdminTotalBooksText"
                                               Text="0"
                                               FontSize="24"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Всего книг"
                                               FontSize="12"
                                               Foreground="White"
                                               Opacity="0.9"
                                               HorizontalAlignment="Center"/>
                                                </StackPanel>
                                            </Border>

                                            <!-- Пользователей -->
                                            <Border Grid.Column="1"
                                    Background="#28A745"
                                    CornerRadius="6"
                                    Margin="5"
                                    Padding="15">
                                                <StackPanel>
                                                    <TextBlock x:Name="AdminTotalUsersText"
                                               Text="0"
                                               FontSize="24"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Пользователей"
                                               FontSize="12"
                                               Foreground="White"
                                               Opacity="0.9"
                                               HorizontalAlignment="Center"/>
                                                </StackPanel>
                                            </Border>

                                            <!-- Активных чтений -->
                                            <Border Grid.Column="2"
                                    Background="#FFC107"
                                    CornerRadius="6"
                                    Margin="5"
                                    Padding="15">
                                                <StackPanel>
                                                    <TextBlock x:Name="AdminActiveReadingsText"
                                               Text="0"
                                               FontSize="24"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Активных чтений"
                                               FontSize="12"
                                               Foreground="White"
                                               Opacity="0.9"
                                               HorizontalAlignment="Center"/>
                                                </StackPanel>
                                            </Border>

                                            <!-- Файлов книг -->
                                            <Border Grid.Column="3"
                                    Background="#17A2B8"
                                    CornerRadius="6"
                                    Margin="5"
                                    Padding="15">
                                                <StackPanel>
                                                    <TextBlock x:Name="AdminBookFilesText"
                                               Text="0"
                                               FontSize="24"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Файлов книг"
                                               FontSize="12"
                                               Foreground="White"
                                               Opacity="0.9"
                                               HorizontalAlignment="Center"/>
                                                </StackPanel>
                                            </Border>
                                        </Grid>

                                        <!-- Быстрые действия -->
                                        <TextBlock Text="⚡ Быстрые действия"
                                   FontSize="16"
                                   FontWeight="Bold"
                                   Foreground="{DynamicResource TextBrush}"
                                   Margin="0,475,0,15"/>

                                        <WrapPanel Margin="0,0,0,20">
                                            <Button Content="📚 Добавить книгу"
                                    Width="160"
                                    Height="40"
                                    Margin="5"
                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                    Style="{StaticResource RoundedButtonStyle}"
                                    Click="AdminQuickAddBook_Click"/>

                                            <Button Content="👥 Управление пользователями"
                                    Width="200"
                                    Height="40"
                                    Margin="5"
                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                    Style="{StaticResource RoundedButtonStyle}"
                                    Click="AdminQuickUsers_Click"/>

                                            <Button Content="📊 Просмотр статистики"
                                    Width="180"
                                    Height="40"
                                    Margin="5"
                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                    Style="{StaticResource RoundedButtonStyle}"
                                    Click="AdminQuickStats_Click"/>

                                            <Button Content="💾 Создать backup"
                                    Width="150"
                                    Height="40"
                                    Margin="5"
                                    Background="{DynamicResource ButtonBackgroundBrush}"
                                    BorderBrush="{DynamicResource ButtonBorderBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                    Style="{StaticResource RoundedButtonStyle}"
                                    Click="AdminQuickBackup_Click"/>
                                        </WrapPanel>
                                    </StackPanel>
                                </ScrollViewer>

                                <!-- Контент для других разделов будет подгружаться динамически -->
                                <ContentControl x:Name="AdminContentControl"
                                Visibility="Visible"/>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </Grid>
            <!-- Панель администратора -->
        </Grid>
        <!-- Overlay: Панель загрузки -->

    </Grid>

</Window>
